<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Rezultatul tÄƒu Nebshome</title>
<style>
:root{
    --ink:#111; --muted:#67708a; --ring:#e7e9f3; --brand:#3a7afe;
    --card:#ffffff; --bg:#f6f7fb;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;background:var(--bg);color:var(--ink)}
.shell{max-width:980px;margin:40px auto;padding:0 16px}
.hero{background:linear-gradient(135deg,#fff 0%,#fff 35%,#f7fbff 100%);border:1px solid var(--ring);border-radius:20px;padding:24px 28px;box-shadow:0 6px 24px rgba(0,0,0,.06)}
.brand{display:flex;gap:12px;align-items:center;margin-bottom:8px;color:var(--muted)}
.brand .dot{width:10px;height:10px;border-radius:50%;background:var(--brand)}
.title{font-size:clamp(24px,3vw,32px);line-height:1.25;margin:0 0 6px}
.subtitle{margin:.25rem 0 1.25rem;color:var(--muted)}
.badge{display:none;align-items:center;gap:8px;background:#fff;border:1px solid var(--ring);border-radius:14px;padding:6px 10px;width:max-content}
.badge .emoji{font-size:18px}
.card{display:none;margin-top:18px;background:#fff;border:1px solid var(--ring);border-radius:12px;padding:18px}
.grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
.block h6{margin:0 0 8px;color:var(--muted);letter-spacing:.02em;text-transform:uppercase;font-size:12px}
.block p{margin:0;color:#232a3a}
.ul{margin:0;padding-left:18px}
.ul li{margin:.4rem 0}
.btns{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
.btn{appearance:none;border:1px solid var(--ring);background:#fff;color:var(--ink);padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer}
.btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
.note{margin-top:12px;color:var(--muted);font-size:14px}

.center{max-width:700px;margin:0 auto}
.error{padding:18px;border-radius:14px;background:#fff;border:1px solid var(--ring);text-align:center}
.error strong{color:#b42318}
.input{width:100%;padding:12px;border:1px solid #d8dde6;border-radius:8px}
.btn.submit{width:100%;padding:12px 18px;background:#6d6afe;border:1px solid #6d6afe;border-radius:10px;color:#fff;font-weight:700;margin-top:10px}
.msg{display:none;margin-top:12px;color:var(--muted)}
</style>
</head>
<body>
<main class="shell">
    <section class="hero">
        <div class="brand"><span class="dot"></span><span>Nebshome</span></div>
        <h1 class="title">Rezultatul tÄƒu Nebshome</h1>
        <p class="subtitle">Recomandare personalizatÄƒ pentru stilul tÄƒu de locuire</p>

        <div id="badge" class="badge" style="display:none">
            <span class="emoji" id="emoji">ğŸ </span>
            <span id="badgeTitle">Profil</span>
        </div>

        <div class="card center" id="card" style="display:none">
            <section>
                <h2 id="head" style="margin:0 0 12px"></h2>

                <div class="grid">
                    <div class="block">
                        <h6>LocuinÈ›a idealÄƒ</h6>
                        <p id="ideal"></p>
                    </div>
                    <div class="block">
                        <h6>La ce sÄƒ fii atent</h6>
                        <ul id="checks" class="ul"></ul>
                    </div>
                </div>

                <div class="block" style="margin-top:8px">
                    <h6>Sfat personal</h6>
                    <p id="tip"></p>
                </div>

                <div class="btns">
                    <button class="btn" onclick="window.print()">DescarcÄƒ / PrinteazÄƒ</button>
                    <a class="btn" href="/ro/test.html">Reia testul</a>
                </div>
                <p class="note">â“˜ AnalizÄƒ generatÄƒ pe baza rÄƒspunsurilor tale.</p>
            </section>
        </div>

        <!-- BLOCAJ EMAIL (APARE DUPÄ‚ PLATÄ‚) -->
        <div id="emailBlock" class="card center" style="display:none;margin-top:12px">
            <h3 style="margin:0 0 10px">PrimeÈ™te rezultatul pe email</h3>
            <form id="sendForm">
                <input type="email" id="email" required placeholder="exemplu@email.com" class="input" />
                <button type="submit" id="sendBtn" class="btn submit">Trimite rezultatul</button>
            </form>
            <p id="msg" class="msg"></p>
        </div>

        <!-- FALLBACK -->
        <div id="fallback" class="error" style="display:none;margin-top:12px">
            <strong>Profil indisponibil</strong> â€” te rugÄƒm sÄƒ reiei testul.
        </div>
    </section>
</main>

<script>
/** 1) Parametri din URL **/
const qs       = new URLSearchParams(location.search);
const profile  = (qs.get('profile') || '').toLowerCase().trim();
const lang     = (qs.get('lang')    || 'ro').toLowerCase().trim();
const session  = (qs.get('session_id') || '').trim();
const orderId  = (qs.get('order_id')   || '').trim();

/** 2) Emojis per profil (pt. insignÄƒ) **/
const emojis = {
    explorer:"ğŸ§­", family:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", dreamer:"ğŸŒ¿",
    minimal:"âœ¨",  introvert:"ğŸ”•",  visionary:"ğŸŒ…", builder:"ğŸ› ï¸"
};

/** 3) ConÈ›inut premium per profil **/
const profileData = {
    explorer:{
        title:"Explorator Urban",
        lead:"EÈ™ti atras de energie, noutate È™i dinamism. Casa ta te susÈ›ine sÄƒ fii conectat cu oraÈ™ul, dar Ã®È›i oferÄƒ È™i un colÈ› de reÃ®ncÄƒrcare.",
        ideal:"Apartament modern Ã®n centru sau lÃ¢ngÄƒ infrastructurÄƒ activÄƒ; plan deschis, luminÄƒ naturalÄƒ abundentÄƒ, soluÈ›ii smart.",
        checks:["Acces rapid la cafenele, culturÄƒ, parcuri È™i transport.","Iluminat inteligent È™i izolare acusticÄƒ decentÄƒ.","SpaÈ›ii flexibile pentru socializare È™i retragere."],
        tip:"Alege un â€hub personalâ€ de unde poÈ›i porni spre oraÈ™, dar unde te poÈ›i Ã®ntoarce pentru claritate È™i energie."
    },
    family:{
        title:"Familist Structurat",
        lead:"Pui pe primul loc securitatea, ordinea È™i timpul Ã®mpreunÄƒ. Casa devine alinul comun al familiei.",
        ideal:"CasÄƒ/ apartament mai generos Ã®ntr-un cartier liniÈ™tit; acces pe jos la servicii; camere bine funcÈ›ionate.",
        checks:["GÃ¢ndeÈ™te pe 5+ ani (grÄƒdiniÈ›Äƒ/È™coalÄƒ).","VerificÄƒ vecinÄƒtatea È™i comunitatea.","Confort È™i funcÈ›ionalitate Ã®nainte de extra-design."],
        tip:"FÄƒ-È›i o â€hartÄƒ a rutineiâ€ zilnice â€“ spaÈ›ii pentru joacÄƒ, lucru, relaxare â€“ fiecare Ã®È™i gÄƒseÈ™te locul."
    },
    dreamer:{
        title:"VisÄƒtor al Naturii",
        lead:"Ai nevoie de liniÈ™te, luminÄƒ È™i texturi naturale. Ai nevoie de un spaÈ›iu care inspirÄƒ È™i calmeazÄƒ.",
        ideal:"Apartament cu vedere spre verde sau casÄƒ la marginea oraÈ™ului; materiale naturale, plante vii, ferestre mari.",
        checks:["EvitÄƒ interioare reci È™i Ã®ncÄƒrcate.","CreeazÄƒ zone pentru retragere È™i creativitate.","ObservÄƒ cum spaÈ›iul Ã®È›i influenÈ›eazÄƒ starea."],
        tip:"TransformÄƒ-È›i locuinÈ›a Ã®ntr-o sursÄƒ de energie blÃ¢ndÄƒ: luminÄƒ, plante, textile moi, paletÄƒ pÄƒmÃ¢ntie."
    },
    minimal:{
        title:"Minimalist ConÈ™tient",
        lead:"PreÈ›uieÈ™ti simplitatea, claritatea È™i ordinea. SpaÈ›iul curat Ã®È›i susÈ›ine focusul.",
        ideal:"Studio/ apartament cu plan clar; tonuri deschise; piese esenÈ›iale; eficienÈ›Äƒ la fiecare metru.",
        checks:["EvitÄƒ supraÃ®ncÄƒrcarea â€“ pÄƒstreazÄƒ doar ce are sens.","CautÄƒ ergonomii & flexibilitate Ã®n mobilier.","Maxim luminÄƒ & aer; mai puÈ›in obiect, mai multÄƒ calitate."],
        tip:"Casa ta e oglinda minÈ›ii tale: ordine Ã®n vedere, iar simplitatea Ã®È›i menÈ›ine echilibrul liniÈ™tit."
    },
    introvert:{
        title:"Introvert Reflexiv",
        lead:"Apreciezi liniÈ™tea, intimitatea È™i controlul asupra timpului tÄƒu. Zgomotul te oboseÈ™te.",
        ideal:"LocuinÈ›Äƒ retrasÄƒ sau bine izolatÄƒ fonic; birou/colÈ› personal; control al luminii È™i al expunerii.",
        checks:["UitÄƒ-te la scoruri de zgomot & ferestre de calitate.","Alege cartiere cu densitate mai scÄƒzutÄƒ.","CreeazÄƒ un ritual de searÄƒ: loc fix pentru reflecÈ›ie."],
        tip:"Alege un stil Ã®n care poÈ›i sÄƒ te Ã®ntorci la tine: liniÈ™tea Ã®È›i amplificÄƒ potenÈ›ialul."
    },
    visionary:{
        title:"Vizionari Strategici",
        lead:"EÈ™ti orientat pe obiective È™i idei. Ai nevoie de spaÈ›iu care te concentreazÄƒ È™i te proiecteazÄƒ spre urmÄƒtorul nivel.",
        ideal:"Loft/ apartament cu vedere amplÄƒ; birou dedicat; zone pentru concentrare È™i vizualizare.",
        checks:["PrioritizeazÄƒ un ancoraj vizual pentru È›inte.","Separare clarÄƒ Ã®ntre lucru È™i relaxare.","Tehnologii care reduc fricÈ›iunea."],
        tip:"LasÄƒ-È›i casa sÄƒ-È›i fie platformÄƒ de lansare: creeazÄƒ un â€colÈ› de sprintâ€ care Ã®È›i calibreazÄƒ ambiÈ›ia."
    },
    builder:{
        title:"Creator Pragmatic",
        lead:"Om de acÈ›iune: practicul È™i finalul primeazÄƒ. FuncÈ›ionalitatea Ã®È›i economiseÈ™te timp È™i energie.",
        ideal:"Apartament cu plan logic, trasee scurte; materiale robuste È™i uÈ™or de Ã®ntreÈ›inut.",
        checks:["Zonare strict pe funcÈ›iuni (lucru, depozitare, odihnÄƒ).","Componente rezistente, Ã®ntreÈ›inere simplÄƒ.","PrioritizeazÄƒ soluÈ›ii care cresc randamentul zilnic."],
        tip:"GÃ¢ndeÈ™te locuinÈ›a ca pe un instrument: fiecare element trebuie sÄƒ munceascÄƒ pentru eficienÈ›a ta."
    }
};

/** 4) Render + afiÈ™are formular email la nevoie **/
function render(profileKey){
    const data = profileData[profileKey];
    const badge = document.getElementById('badge');
    const card  = document.getElementById('card');

    if(!data){ document.getElementById('fallback').style.display='block'; return; }

    document.getElementById('emoji').textContent    = (emojis[profileKey] || 'ğŸ ') + ' ';
    document.getElementById('badgeTitle').textContent = data.title;
    document.getElementById('head').textContent     = data.lead;
    document.getElementById('ideal').textContent    = data.ideal;

    const ul = document.getElementById('checks');
    ul.innerHTML='';
    data.checks.forEach(c => { const li=document.createElement('li'); li.textContent=c; ul.appendChild(li); });

    document.getElementById('tip').textContent = data.tip;

    badge.style.display = 'inline-flex';
    card.style.display  = 'block';

    // dacÄƒ venim din checkout (ai buton View result), afiÈ™eazÄƒ formularul
    const fromCheckout = qs.get('from') === 'checkout' || !qs.get('direct');
    if(fromCheckout) document.getElementById('emailBlock').style.display='block';
}

/** 5) ValideazÄƒ profil & porneÈ™te **/
const allowed = Object.keys(profileData);
if (!allowed.includes(profile)) {
    // dacÄƒ nu primim profil corect, nu forÈ›Äƒm nimic
    document.getElementById('fallback').style.display='block';
} else {
    render(profile);
}

/** 6) Trimitere la Make **/
const WEBHOOK_URL = "https://PUTEÈšI_PUNE_AICI_URLUL_TÄ‚U_DE_WEBHOOK"; // <-- schimbÄƒ!

(function initEmailSend(){
    const form = document.getElementById('sendForm');
    if(!form) return;
    const msg  = document.getElementById('msg');
    const btn  = document.getElementById('sendBtn');

    form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const email = (document.getElementById('email').value || '').trim();
        if(!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){
            msg.style.display='block'; msg.textContent='AdresÄƒ email invalidÄƒ.'; return;
        }

        btn.disabled=true; msg.style.display='block'; msg.textContent='Se trimiteâ€¦';

        try{
            const res = await fetch(WEBHOOK_URL, {
                method:'POST',
                headers:{'Content-Type':'application/json'},
                body: JSON.stringify({ email, profile, lang, session_id: session, order_id: orderId })
            });
            msg.textContent = res.ok ? 'Trimis! VerificÄƒ inbox-ul (È™i spam).' : 'Eroare la trimitere. ÃncearcÄƒ din nou.';
        }catch(_){
            msg.textContent = 'ReÈ›ea indisponibilÄƒ. ÃncearcÄƒ din nou.';
        }finally{
            btn.disabled=false;
        }
    });
})();
</script>
</body>
</html></div></section></main>