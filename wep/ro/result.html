<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Rezultatul testului</title>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f1eb;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }
        h2 {
            color: #333;
        }
        input, button {
            padding: 10px;
            font-size: 16px;
            margin-top: 10px;
        }
        #status {
            margin-top: 15px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Primește rezultatul testului Nebshome</h2>
        <p>Introdu adresa ta de email pentru a primi rezultatul personalizat:</p>
        <form id="emailForm">
            <input type="email" id="emailInput" placeholder="ex: exemplu@email.com" required>
            <br>
            <button type="submit">Trimite rezultatul</button>
        </form>
        <div id="status"></div>
    </div>

    <script>
        emailjs.init("1ST-gLMyc21_n0LYfFhMn");

        const profileParam = new URLSearchParams(window.location.search).get("profile");

        const profileData = {
            "explorer": {
                title: "Profilul tău: Explorator Urban",
                message: `Ești o persoană activă, mereu în mișcare...`
            },
            "family": {
                title: "Profilul tău: Familist Structurat",
                message: `Apreciezi stabilitatea, ordinea...`
            },
            "dreamer": {
                title: "Profilul tău: Visător Natural",
                message: `Ești o persoană sensibilă și intuitivă...`
            },
            "minimal": {
                title: "Profilul tău: Minimalist Conștient",
                message: `Apreciezi simplitatea, claritatea și ordinea...`
            },
            "introvert": {
                title: "Profilul tău: Retraș Reflexiv",
                message: `Ești o persoană rezervată și profundă...`
            },
            "leader": {
                title: "Profilul tău: Strateg Financiar",
                message: `Gândești pe termen lung și iei decizii raționale...`
            },
            "artist": {
                title: "Profilul tău: Creativ Liber",
                message: `Te exprimi prin spațiu. Nu vrei reguli...`
            }
        };

        const form = document.getElementById("emailForm");
        const emailInput = document.getElementById("emailInput");
        const statusDiv = document.getElementById("status");

        form.addEventListener("submit", function(e) {
            e.preventDefault();

            const email = emailInput.value;

            if (!profileParam || !profileData[profileParam]) {
                statusDiv.innerText = "Profil invalid. Te rugăm să refaci testul.";
                statusDiv.style.color = "red";
                return;
            }

            const data = profileData[profileParam];

            emailjs.send("service_fi6vuze", "template_z9cpnzv", {
                to_email: email,
                name: "Client Nebshome",
                title: data.title,
                message: data.message
            })
            .then(function(response) {
                statusDiv.innerText = "Rezultatul a fost trimis cu succes!";
                statusDiv.style.color = "green";
                form.reset();
            }, function(error) {
                statusDiv.innerText = "Eroare la trimitere. Încearcă din nou.";
                statusDiv.style.color = "red";
            });
        });
    </script>
</body>
</html>