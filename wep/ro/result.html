<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Rezultatul tƒÉu Nebshome</title>
    <style>
        :root{--ink:#1f1f1f;--ring:#e5e7eb;--brand:#865ae0;}
        *{box-sizing:border-box}
        body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#fafafa;color:var(--ink)}
        .shell{max-width:760px;margin:48px auto;padding:0 18px}
        .card{background:#fff;border:1px solid var(--ring);border-radius:14px;padding:22px 18px;box-shadow:0 6px 24px rgba(15,23,42,.06)}
        h1{font-size:clamp(20px,3vw,28px);margin:0 0 6px}
        .muted{color:#6b7280;font-size:14px}
        .email{margin-top:18px;display:grid;gap:12px}
        input[type="email"]{width:100%;padding:12px 14px;border:1px solid #d1d5db;border-radius:8px;font-size:16px}
        button{padding:12px 16px;border:1px solid var(--ring);border-radius:8px;background:#111827;color:#fff;font-weight:600;cursor:pointer}
        button:disabled{opacity:.6;cursor:not-allowed}
        .msg{margin-top:10px;font-size:14px}
        .ok{color:#166534}
        .err{color:#b42318}
        .chip{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--ring);background:#f8fafc;border-radius:999px;padding:6px 10px;font-weight:600;margin-top:8px}
        .chip small{color:#6b7280;font-weight:600}
    </style>
</head>
<body>
    <main class="shell">
        <div class="card">
            <h1>Rezultatul tƒÉu Nebshome</h1>
            <p class="muted">Recomandarea detaliatƒÉ »õi-a fost <strong>trimisƒÉ pe email</strong>.</p>

            <div id="chip" class="chip" style="display:none">
                <span id="chipEmoji">üè∑Ô∏è</span>
                <span><small>Profil</small> <span id="chipText"></span></span>
            </div>

            <section class="email card" style="margin-top:16px">
                <h3 style="margin:0 0 6px">Trimite rezultatul pe email</h3>
                <form id="f">
                    <input id="email" name="email" type="email" required placeholder="exemplu@email.com" />
                    <button id="btn" type="submit">Trimite rezultatul</button>
                </form>
                <div id="msg" class="msg muted" style="display:none"></div>
            </section>

            <p class="muted" style="margin-top:14px">DacƒÉ nu gƒÉse»ôti mesajul, verificƒÉ folderul ‚ÄûSpam‚Äù / ‚ÄûPromotions‚Äù.</p>
        </div>
    </main>

    <script>
        // Webhook URL din Make
        const WEBHOOK_URL = "https://hook.eu2.make.com/a6qpye9nylq8ny9dym7q2xy8w8g85b9v";

        const params  = new URLSearchParams(location.search);
        const profile = (params.get("profile") || "").toLowerCase().trim();
        const lang    = (params.get("lang")    || "ro").toLowerCase().trim();

        const chipMap = {
            explorer:   { text: "Explorator Urban", emoji: "üß≠" },
            family:     { text: "Familist Structurat", emoji: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶" },
            dreamer:    { text: "VisƒÉtor al Naturii", emoji: "üåø" },
            minimal:    { text: "Minimalist Con»ôtient", emoji: "üìê" },
            introvert:  { text: "Introvert Reflexiv", emoji: "üõãÔ∏è" },
            visionary:  { text: "Vizionar Strategic", emoji: "üéØ" },
            builder:    { text: "Creator Pragmatic", emoji: "üß∞" },
        };

        (function showChip(){
            if (!profile || !chipMap[profile]) return;
            document.getElementById("chipText").textContent  = chipMap[profile].text;
            document.getElementById("chipEmoji").textContent = chipMap[profile].emoji;
            document.getElementById("chip").style.display = "inline-flex";
        })();

        const form = document.getElementById("f");
        const msg  = document.getElementById("msg");
        const btn  = document.getElementById("btn");

        form.addEventListener("submit", async (e)=>{
            e.preventDefault();
            const email = document.getElementById("email").value.trim();
            if (!email) return;

            btn.disabled = true;
            msg.style.display = "block";
            msg.className = "msg muted";
            msg.textContent = "Se trimite...";

            try{
                const res = await fetch(WEBHOOK_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ email, profile, lang })
                });

                if(res.ok){
                    msg.className = "msg ok";
                    msg.textContent = "Trimis! VerificƒÉ inboxul (»ôi spam).";
                }else{
                    msg.className = "msg err";
                    msg.textContent = "Eroare la trimitere. √éncearcƒÉ din nou.";
                }
            }catch(_){
                msg.className = "msg err";
                msg.textContent = "Re»õea indisponibilƒÉ. √éncearcƒÉ din nou.";
            }finally{
                btn.disabled = false;
            }
        });
    </script>
</body>
</html></form>